(this.webpackJsonprozumsoft=this.webpackJsonprozumsoft||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),s=a(19),i=a(41),l=a(27),u=a(65),m=a(42);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={user:null,isAuth:!1,queryResult:{status:"",message:""}},b="LOCATIONS:SET_ITEMS";function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={items:[],currentItem:{coodrs:[55.751442,37.618874],name:"\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u0439 \u041a\u0440\u0435\u043c\u043b\u044c"}},E=Object(l.c)({locations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return O({},e,{items:t.payload});case"LOCATIONS:SET_CURRENT_ITEM":return O({},e,{currentItem:t.item});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER:SET_DATA":return d({},e,{user:t.payload,isAuth:!0});case"USER:SET_QUERY_DATA":return d({},e,{queryResult:t.payload});default:return e}}}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,y=[u.a],j=v(l.a.apply(void 0,y)),w=Object(l.e)(E,j),C=a(28),I=a(66),N=a(67),k=a(81),T=a(68),S=a(82),D=a(33),A=a.n(D),J=a(43),L=a(79),P=a(155),_=a(156),z=a(154),R=a(158),U=a(78),Y=a.n(U),x=a(108),W=a(72),M=a(153),Q=a(160),F=a(145),B=a(147),G=a(148),X=Object(W.a)((function(e){return Object(Q.a)({card:{width:"100%",margin:e.spacing(0,0,2,0),"&:last-child":{marginBottom:1}}})})),Z=function(e){var t=e.item,a=e.name,n=e.setCurrentItem,o=X();return r.a.createElement(F.a,{className:o.card,onClick:n.bind(F.a,t)},r.a.createElement(B.a,null,r.a.createElement(G.a,null,r.a.createElement(x.a,{gutterBottom:!0,variant:"h5",component:"h2"},a))))},q=a(80),V=a(83),H=a(3),K=a(73),$=a.n(K),ee=a(75),te=a.n(ee),ae=a(76),ne=a.n(ae),re=a(77),oe=a.n(re),ce=a(149),se=a(150),ie=a(152),le=a(161),ue=a(151),me=a(74),pe=a.n(me),de={success:$.a,warning:pe.a,error:te.a,info:ne.a},fe=Object(W.a)((function(e){return{success:{backgroundColor:ce.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:se.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),be=function(e){var t=fe(),a=e.className,n=e.message,o=e.onClose,c=e.variant,s=Object(V.a)(e,["className","message","onClose","variant"]),i=de[c];return r.a.createElement(ue.a,Object.assign({className:Object(H.a)(t[c],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(i,{className:Object(H.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(ie.a,{key:"close","aria-label":"close",color:"inherit",onClick:o},r.a.createElement(oe.a,{className:t.icon}))]},s))};function ge(e){var t=e.status,a=e.message,n=r.a.useState(!0),o=Object(q.a)(n,2),c=o[0],s=o[1],i=function(e,t){"clickaway"!==t&&s(!1)};return r.a.createElement("div",null,r.a.createElement(le.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:c,autoHideDuration:6e3,onClose:i},r.a.createElement(be,{onClose:i,variant:"error"===t?"error":"success",message:a})))}var Oe=a(48),he=function(e){var t=e.currentItem;return r.a.createElement(Oe.c,{query:{ns:"use-load-option",load:"Map,Placemark,control.ZoomControl,control.FullscreenControl,geoObject.addon.balloon"}},r.a.createElement(Oe.a,{width:"100wh",height:"100vh",state:{center:t.coodrs,zoom:11,controls:["zoomControl","fullscreenControl"]}},r.a.createElement(Oe.b,{geometry:t.coodrs,properties:{balloonContentBody:t.name}})))},Ee=function(e,t,a){return!!t[e]&&!!a[e]},ve=Object(W.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ye=function(e){var t=e.values,a=e.touched,n=e.errors,o=e.handleChange,c=e.handleBlur,i=e.handleSubmit,l=e.isSubmitting,u=ve(),m=Object(s.c)((function(e){return e.user.queryResult}));return r.a.createElement(M.a,{component:"main",maxWidth:"xs"},r.a.createElement(z.a,null),r.a.createElement("div",{className:u.paper},r.a.createElement(P.a,{className:u.avatar},r.a.createElement(Y.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:u.form,onSubmit:i,noValidate:!0},r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:a.email?n.email:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:t.email,onChange:o,onBlur:c,error:Ee("email",a,n)}),r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:a.password?n.password:"Password",type:"password",id:"password",autoComplete:"current-password",value:t.password,onChange:o,onBlur:c,error:Ee("password",a,n)}),r.a.createElement(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:l,className:u.submit},"Sign In"))),m.status?r.a.createElement(ge,{status:m.status,message:m.message}):null)},je=[{coodrs:[53.9105,27.549637],name:"\u0414\u0432\u043e\u0440\u0435\u0446 \u0441\u043f\u043e\u0440\u0442\u0430"},{coodrs:[53.895688,27.547812],name:"\u041f\u043b. \u041d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438"},{coodrs:[53.902418,27.561828],name:"0 \u043a\u043c"},{coodrs:[53.906544,27.436475],name:"\u041a\u0430\u043c\u0435\u043d\u043d\u0430\u044f \u0433\u043e\u0440\u043a\u0430"},{coodrs:[53.936153,27.481583],name:"\u041c\u0438\u043d\u0441\u043a-\u0430\u0440\u0435\u043d\u0430"},{coodrs:[53.904026,27.56787],name:"\u0411\u0435\u043b\u043e\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u0446\u0438\u0440\u043a"},{coodrs:[55.751442,37.618874],name:"\u041c\u043e\u0441\u043a\u043e\u0432\u0441\u043a\u0438\u0439 \u041a\u0440\u0435\u043c\u043b\u044c"},{coodrs:[50.449558,30.525399],name:"\u041c\u043e\u043d\u0443\u043c\u0435\u043d\u0442 \u041d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u0423\u043a\u0440\u0430\u0438\u043d\u044b"}],we=[{id:"1",name:"\u0412\u0430\u0441\u044f",email:"administrator@gmail.com",password:"1234567",token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjEiLCJuYW1lIjoi0JLQsNGB0Y8iLCJlbWFpbCI6ImFkbWluaXN0cmF0b3JAZ21haWwuY29tIiwianRpIjoiNzQ4Zjg4OTYtNGUzNy00ODAwLTkxOTktYmMzMGQ4NmQzZTk3IiwiaWF0IjoxNTcwNzk1Nzg0LCJleHAiOjE1NzA3OTkzODR9.6Hqm6lHnnMRGoXi6t4b-ZEXelGj-v7D2H_3PwQ_jos0"},{id:"2",name:"\u041f\u0435\u0442\u044f",email:"moderator@gmail.com",password:"7654321",token:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjIiLCJuYW1lIjoi0J_QtdGC0Y8iLCJlbWFpbCI6Im1vZGVyYXRvckBnbWFpbC5jb20iLCJqdGkiOiJiY2Y5MDZlNC0yYzMwLTQ3NWYtODBmNS01YWYzNTcwZDc4YWMiLCJpYXQiOjE1NzA3OTI2NDksImV4cCI6MTU3MDc5NjI0OX0.9nn-DeFE7pYbqle3LxIhiFmCH_HhmLS6ff-3hTsryAg"}],Ce=function(e){var t=we.find((function(t){return t.email===e.email}));return t?t.password!==e.password?Promise.resolve({status:"error",message:"Incorrect password",user:null}):Promise.resolve({status:"success",message:"User found",user:{id:t.id,name:t.name,email:t.email,token:t.token}}):Promise.resolve({status:"error",message:"User not found",user:null})},Ie={setCurrentItem:function(e){return{type:"LOCATIONS:SET_CURRENT_ITEM",item:e}},setLocationData:function(e){return{type:b,payload:e}},fetchLocationData:function(){return function(e){e(Ie.setLocationData(je))}}},Ne=Ie,ke={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},setQueryData:function(e){return{type:"USER:SET_QUERY_DATA",payload:e}},fetchUserLogin:function(e){return function(){var t=Object(J.a)(A.a.mark((function t(a){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce(e);case 3:return"success"===(n=t.sent).status&&(n=n,window.localStorage.token=n.user.token,a(ke.setUserData(n.user))),a(ke.setQueryData({status:n.status,message:n.message})),t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},Te=ke,Se=Object(L.a)({enableReinitialize:!0,mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return function(e){var t=e.values,a=e.errors,n={email:function(e){e||(a.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 E-Mail")},password:function(e){e||(a.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c")}};Object.keys(t).forEach((function(e){return n[e]&&n[e](t[e])}))}({values:e,errors:t}),t},handleSubmit:function(){var e=Object(J.a)(A.a.mark((function e(t,a){var n,r,o,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.setSubmitting,r=a.props,o=r.fetchUserLogin,c=r.history,e.next=4,o(t);case 4:"success"===e.sent.status&&c.push("/"),n(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),displayName:"LoginForm"})(ye),De=Object(s.b)(null,Te)(Se),Ae=function(e){function t(){return Object(I.a)(this,t),Object(k.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(C.b,{exact:!0,path:["/","/signin"],component:De})))}}]),t}(r.a.Component),Je=a(157),Le=Object(W.a)((function(e){return{root:{height:"100vh"},paper:{margin:e.spacing(1,1),padding:e.spacing(0,1),height:"100%",overflow:"auto"},sidebar:{height:"calc(100% - 16px)"}}})),Pe=Object(s.b)((function(e){return{currentItem:e.locations.currentItem}}),Ne)((function(e){var t=e.currentItem,a=e.setCurrentItem,o=e.fetchLocationData,c=Le(),i=Object(s.c)((function(e){return e.locations.items}));return Object(n.useEffect)((function(){o();var e=setInterval((function(){o()}),3e3);return function(){clearInterval(e)}}),[]),r.a.createElement(Je.a,{container:!0,component:"main",className:c.root},r.a.createElement(z.a,null),r.a.createElement(Je.a,{item:!0,sm:12,md:8},r.a.createElement(he,{currentItem:t})),r.a.createElement(Je.a,{item:!0,sm:12,md:4,className:c.sidebar},r.a.createElement("div",{className:c.paper},i.map((function(e,t){return r.a.createElement(Z,{key:t,item:e,name:e.name,setCurrentItem:a})})))))})),_e=Object(s.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth;return r.a.createElement("div",{className:"wrapper"},r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/signin",component:Ae}),r.a.createElement(C.b,{path:"/",render:function(){return t?r.a.createElement(Pe,null):r.a.createElement(C.a,{to:"/signin"})}})))}));a(106);c.a.render(r.a.createElement(s.a,{store:w},r.a.createElement(i.a,null,r.a.createElement(_e,null))),document.getElementById("root"))},92:function(e,t,a){e.exports=a(107)}},[[92,1,2]]]);
//# sourceMappingURL=main.fbcd96e3.chunk.js.map